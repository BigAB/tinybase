var e,t;e=this,t=function(e,t){"use strict";const s=e=>typeof e,n="",o=s(n),r=s(!0),a=s(0),i=s(s),d="type",l="default",c="utf8",u=e=>[e,e],f=(e,t)=>e.includes(t),h=(e,t)=>e.every(((s,n)=>0==n||t(e[n-1],s)<=0)),g=(e,t)=>e.sort(t),L=(e,t)=>e.forEach(t),p=e=>I(e,((e,t)=>e+t),0),w=e=>e.length,v=e=>0==w(e),I=(e,t,s)=>e.reduce(t,s),y=e=>e.slice(1),S=(e,t)=>e.push(t),T=e=>e.pop(),R=e=>JSON.stringify(e,((e,t)=>E(t,Map)?I([...t],((e,[t,s])=>(e[t]=s,e)),{}):t)),b=JSON.parse,C=Math.max,m=Math.min,k=isFinite,E=(e,t)=>e instanceof t,M=e=>null==e,x=(e,t,s)=>M(e)?s?.():t(e),A=e=>e==o||e==r,D=e=>s(e)==i,F=()=>{},P=e=>e.size,J=(e,t)=>e?.has(t)??!1,O=e=>M(e)||0==P(e),j=e=>[...e?.values()??[]],z=e=>e.clear(),N=(e,t)=>e?.forEach(t),B=(e,t)=>e?.delete(t),W=e=>new Map(e),_=(e=W)=>[e(),e()],q=e=>[...e?.keys()??[]],H=(e,t)=>e?.get(t),G=(e,t)=>N(e,((e,s)=>t(s,e))),K=(e,t,s)=>M(s)?(B(e,t),e):e?.set(t,s),Q=(e,t,s)=>(J(e,t)||K(e,t,s()),H(e,t)),U=(e,t,s)=>{const n={},o=t??(e=>e);return N(e,((e,t)=>x(o(e),(e=>s?.(e)?0:n[t]=e)))),n},V=(e,t)=>{const s=W(),n=t??(e=>e);return N(e,((e,t)=>s.set(t,n(e)))),s},X=e=>V(e,V),Y=e=>new Set(e),Z=(e,t)=>e?.add(t),$=(e,t,s)=>{const n=e.hasRow,o=W(),r=W(),a=W(),i=W(),d=W(),l=t=>x(H(d,t),(s=>{N(s,e.delListener),K(d,t)})),c=e=>{K(o,e),K(r,e),K(a,e),K(i,e),l(e)};return[()=>e,()=>q(o),e=>G(r,e),e=>J(r,e),e=>H(o,e),e=>H(r,e),(e,t)=>K(r,e,t),(c,u,f,h,g)=>{const p=W(),w=W();K(o,c,u),J(r,c)||(K(r,c,t()),K(a,c,W()),K(i,c,W()));const v=H(a,c),I=H(i,c),y=t=>{const o=s=>e.getCell(u,t,s),r=H(v,t),a=n(u,t)?s(h(o,t)):void 0;if(r!=a&&K(p,t,[r,a]),!M(g)){const e=H(I,t),s=n(u,t)?g(o,t):void 0;e!=s&&K(w,t,s)}},S=e=>{f((()=>{N(p,(([,e],t)=>K(v,t,e))),N(w,((e,t)=>K(I,t,e)))}),p,w,v,I,e),z(p),z(w)};G(v,y),e.hasTable(u)&&L(e.getRowIds(u),(e=>{J(v,e)||y(e)})),S(!0),l(c),K(d,c,Y([e.addRowListener(u,null,((e,t,s)=>y(s))),e.addTableListener(u,(()=>S()))]))},c,()=>G(d,c)]},ee=(e,t)=>s(e)==o?t=>t(e):e??(()=>t??n),te=e=>{const t=new WeakMap;return s=>(t.has(s)||t.set(s,e(s)),t.get(s))},se=(e,t,s)=>w(s)<2?Z(v(s)?e:Q(e,s[0],Y),t):se(Q(e,s[0],W),t,y(s)),ne=e=>{const t=(s,n,...o)=>x(s,(s=>v(o)?e(s,n):L([o[0],null],(e=>t(H(s,e),n,...y(o))))));return t},oe=e=>{let t,s=0;const n=[],o=W();return[(r,a,i=[])=>{t??=e();const d=T(n)??""+s++;return K(o,d,[r,a,i]),se(a,d,i),d},(e,s=[],...n)=>ne(N)(e,(e=>x(H(o,e),(([e])=>e(t,...s,...n)))),...s),e=>x(H(o,e),(([,t,s])=>(ne(B)(t,e,...s),K(o,e),w(n)<1e3&&S(n,e),s)),(()=>[])),(e,s,n)=>x(H(o,e),(([e,,o])=>{const r=(...a)=>{const i=w(a);i==w(o)?e(t,...a,...n(a)):M(o[i])?L(s[i](...a),(e=>r(...a,e))):r(...a,o[i])};r()}))]},re=Object,ae=re.keys,ie=re.isFrozen,de=re.freeze,le=(e,t)=>!M(((e,t)=>x(e,(e=>e[t])))(e,t)),ce=(e,t)=>delete e[t],ue=(e,t)=>L(re.entries(e),(([e,s])=>t(s,e))),fe=e=>v(ae(e)),he=te((e=>{let t,s,n,o=100,r=W(),a=1;const i=Y(),d=W(),[l,c,u]=oe((()=>z)),h=W(),g=W(),p=[],I=[],y=(t,s)=>{a=0,e.transaction((()=>N(H(h,s),((s,n)=>N(s,((s,o)=>N(s,((s,r)=>M(s[t])?e.delCell(n,o,r,!0):e.setCell(n,o,r,s[t]))))))))),a=1},R=e=>{K(h,e),K(g,e),c(d,[e])},b=(e,t)=>L(((e,t)=>e.splice(0,t))(e,t??w(e)),R),C=()=>b(p,w(p)-o),m=e.addCellListener(null,null,null,((e,s,o,i,d,l)=>{if(a){x(t,(()=>{S(p,t),C(),b(I),t=void 0,n=1}));const e=Q(r,s,W),a=Q(e,o,W),c=Q(a,i,(()=>[l,void 0]));c[1]=d,c[0]===d&&O(K(a,i))&&O(K(e,o))&&O(K(r,s))&&(t=T(p),n=1),D()}})),k=(e="")=>(M(t)&&(t=""+s++,K(h,t,r),P(t,e),r=W(),n=1),t),E=()=>{v(p)||(I.unshift(k()),y(0,t),t=T(p),n=1)},A=()=>{v(I)||(S(p,t),t=I.shift(),y(1,t),n=1)},D=()=>{n&&(c(i),n=0)},F=e=>{const t=k(e);return D(),t},P=(e,t)=>(j(e)&&H(g,e)!==t&&(K(g,e,t),c(d,[e])),z),j=e=>J(h,e),z={setSize:e=>(o=e,C(),z),addCheckpoint:F,setCheckpoint:P,getStore:()=>e,getCheckpointIds:()=>[[...p],t,[...I]],forEachCheckpoint:e=>G(g,e),hasCheckpoint:j,getCheckpoint:e=>H(g,e),goBackward:()=>(E(),D(),z),goForward:()=>(A(),D(),z),goTo:e=>{const s=f(p,e)?E:f(I,e)?A:null;for(;!M(s)&&e!=t;)s();return D(),z},addCheckpointIdsListener:e=>l(e,i),addCheckpointListener:(e,t)=>l(t,d,[e]),delListener:e=>(u(e),z),clear:()=>(b(p),b(I),M(t)||R(t),t=void 0,s=0,F(),z),destroy:()=>{e.delListener(m)},getListenerStats:()=>({})};return de(z.clear())})),ge=(e,t)=>e<t?-1:1,Le=e=>n+e,pe=te((e=>{const t=W(),s=W(),[o,r,a,i,d,l,c,u,f,L]=$(e,W,(e=>M(e)?n:e+n)),[p,w,v]=oe((()=>y)),I=(t,s,n)=>{const o=d(t);N(n,((t,n)=>s(n,(s=>N(t,(t=>s(t,(s=>e.forEachCell(o,t,s)))))))))},y={setIndexDefinition:(e,n,o,r,a,i=ge)=>{const d=M(a)?void 0:([e],[t])=>a(e,t);return u(e,n,((n,o,a,u,f,L)=>{let p=0;const v=Y(),I=Y(),y=l(e);if(N(o,(([e,t],s)=>{M(e)||(Z(v,e),x(H(y,e),(t=>{B(t,s),O(t)&&(K(y,e),p=1)}))),M(t)||(Z(v,t),J(y,t)||(K(y,t,Y()),p=1),Z(H(y,t),s),M(r)||Z(I,t))})),n(),O(f)||(L?G(y,(e=>Z(I,e))):G(a,(e=>x(H(u,e),(e=>Z(I,e))))),N(I,(e=>{const t=(t,s)=>i(H(f,t),H(f,s),e),s=[...H(y,e)];h(s,t)||(K(y,e,Y(g(s,t))),Z(v,e))}))),(p||L)&&!M(d)){const t=[...y];h(t,d)||(c(e,W(g(t,d))),p=1)}p&&w(t,[e]),N(v,(t=>w(s,[e,t])))}),ee(o),x(r,ee)),y},delIndexDefinition:e=>(f(e),y),getStore:o,getIndexIds:r,forEachIndex:e=>a(((t,s)=>e(t,(e=>I(t,e,s))))),forEachSlice:(e,t)=>I(e,t,l(e)),hasIndex:i,hasSlice:(e,t)=>J(l(e),t),getTableId:d,getSliceIds:e=>q(l(e)),getSliceRowIds:(e,t)=>j(H(l(e),t)),addSliceIdsListener:(e,s)=>p(s,t,[e]),addSliceRowIdsListener:(e,t,n)=>p(n,s,[e,t]),delListener:e=>(v(e),y),destroy:L,getListenerStats:()=>({})};return de(y)})),we=W([["avg",[(e,t)=>p(e)/t,(e,t,s)=>e+(t-e)/(s+1),(e,t,s)=>e+(e-t)/(s-1),(e,t,s,n)=>e+(t-s)/n]],["max",[e=>C(...e),(e,t)=>C(t,e),(e,t)=>t==e?void 0:e,(e,t,s)=>s==e?void 0:C(t,e)]],["min",[e=>m(...e),(e,t)=>m(t,e),(e,t)=>t==e?void 0:e,(e,t,s)=>s==e?void 0:m(t,e)]],["sum",[e=>p(e),(e,t)=>e+t,(e,t)=>e-t,(e,t,s)=>e-s+t]]]),ve=te((e=>{const t=W(),[s,o,r,a,i,d,l,c,u,f]=$(e,F,(e=>isNaN(e)||M(e)||!0===e||!1===e||e===n?void 0:1*e)),[h,g,L]=oe((()=>p)),p={setMetricDefinition:(e,s,n,o,r,a,i)=>{const u=D(n)?[n,r,a,i]:H(we,n)??H(we,"sum");return c(e,s,((s,n,o,r,a,i)=>{let c=d(e),f=P(r);const[h,L,p,w]=u;i=i||M(c),N(n,(([e,t])=>{i||(c=M(e)?L?.(c,t,f++):M(t)?p?.(c,e,f--):w?.(c,t,e,f)),i=i||M(c)})),s(),O(r)?c=void 0:i&&(c=h(j(r),P(r))),k(c)||(c=void 0);const v=d(e);c!=v&&(l(e,c),g(t,[e],c,v))}),ee(o,1)),p},delMetricDefinition:e=>(u(e),p),getStore:s,getMetricIds:o,forEachMetric:r,hasMetric:a,getTableId:i,getMetric:d,addMetricListener:(e,s)=>h(s,t,[e]),delListener:e=>(L(e),p),destroy:f,getListenerStats:()=>({})};return de(p)})),Ie=(e,t,s,n,o)=>{let r,a=0;const i={load:async s=>{if(2!=a){a=1;const n=await t();M(n)||""==n?e.setTables(s):e.setJson(n),a=0}return i},startAutoLoad:async e=>(i.stopAutoLoad(),await i.load(e),n(i.load),i),stopAutoLoad:()=>(o(),i),save:async()=>(1!=a&&(a=2,await s(e.getJson()),a=0),i),startAutoSave:async()=>(await i.stopAutoSave().save(),r=e.addTablesListener((()=>i.save())),i),stopAutoSave:()=>(x(r,e.delListener),i),getStore:()=>e,destroy:()=>i.stopAutoLoad().stopAutoSave(),getStats:()=>({})};return de(i)},ye="storage",Se=globalThis.window,Te=(e,t,s)=>{let n;return Ie(e,(async()=>s.getItem(t)),(async e=>s.setItem(t,e)),(e=>{n=n=>{n.storageArea===s&&n.key===t&&e()},Se.addEventListener(ye,n)}),(()=>{Se.removeEventListener(ye,n),n=void 0}))},Re=e=>e.headers.get("ETag"),be=te((e=>{const t=W(),s=W(),o=W(),r=W(),[a,i,d,l,c,u,,f,h,g]=$(e,(()=>[W(),W(),W(),W()]),(e=>M(e)?void 0:e+n)),[L,p,w]=oe((()=>S)),v=(e,t,s)=>x(u(e),(([n,,o])=>{if(!J(o,t)){const r=Y();if(c(e)!=y(e))Z(r,t);else{let e=t;for(;!M(e)&&!J(r,e);)Z(r,e),e=H(n,e)}if(s)return r;K(o,t,r)}return H(o,t)})),I=(e,t)=>x(u(e),(([,,e])=>K(e,t))),y=e=>H(t,e),S={setRelationshipDefinition:(e,n,a,i)=>(K(t,e,a),f(e,n,((t,n)=>{const a=Y(),i=Y(),d=Y(),[l,c]=u(e);N(n,(([t,s],n)=>{M(t)||(Z(i,t),x(H(c,t),(e=>{B(e,n),O(e)&&K(c,t)}))),M(s)||(Z(i,s),J(c,s)||K(c,s,Y()),Z(H(c,s),n)),Z(a,n),K(l,n,s),G(H(r,e),(t=>{J(v(e,t),n)&&Z(d,t)}))})),t(),N(a,(t=>p(s,[e,t]))),N(i,(t=>p(o,[e,t]))),N(d,(t=>{I(e,t),p(r,[e,t])}))}),ee(i)),S),delRelationshipDefinition:e=>(K(t,e),h(e),S),getStore:a,getRelationshipIds:i,forEachRelationship:t=>d((s=>t(s,(t=>e.forEachRow(c(s),t))))),hasRelationship:l,getLocalTableId:c,getRemoteTableId:y,getRemoteRowId:(e,t)=>H(u(e)?.[0],t),getLocalRowIds:(e,t)=>j(H(u(e)?.[1],t)),getLinkedRowIds:(e,t)=>M(u(e))?[t]:j(v(e,t,!0)),addRemoteRowIdListener:(e,t,n)=>L(n,s,[e,t]),addLocalRowIdsListener:(e,t,s)=>L(s,o,[e,t]),addLinkedRowIdsListener:(e,t,s)=>(v(e,t),L(s,r,[e,t])),delListener:e=>(I(...w(e)),S),destroy:g,getListenerStats:()=>({})};return de(S)})),Ce=(e,t,s,n=K)=>{const o=(r=q(e),a=e=>!le(t,e),r.filter(a));var r,a;return L(ae(t),(n=>s(e,n,t[n]))),L(o,(t=>n(e,t))),e},me=e=>{const t=s(e);return A(t)||t==a&&k(e)?t:void 0},ke=(e,t,s)=>M(e)||!(e=>E(e,re)&&e.constructor==re)(e)||fe(e)||ie(e)?(s?.(),!1):(ue(e,((s,n)=>{t(s,n)||ce(e,n)})),!fe(e)),Ee=(e,t,s)=>K(e,t,H(e,t)==-s?void 0:s);e.createCheckpoints=he,e.createCustomPersister=Ie,e.createFilePersister=(e,s)=>{let n;return Ie(e,(async()=>{try{return await t.promises.readFile(s,c)}catch{}}),(async e=>{try{await t.promises.writeFile(s,e,c)}catch{}}),(e=>{n=t.watch(s,e)}),(()=>{n?.close(),n=void 0}))},e.createIndexes=pe,e.createLocalPersister=(e,t)=>Te(e,t,localStorage),e.createMetrics=ve,e.createRelationships=be,e.createRemotePersister=(e,t,s,n)=>{let o,r;return Ie(e,(async()=>{const e=await fetch(t);return r=Re(e),e.text()}),(async e=>await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:e})),(e=>{o=setInterval((async()=>{const s=await fetch(t,{method:"HEAD"}),n=Re(s);M(r)||M(n)||n==r||(r=n,e())}),1e3*n)}),(()=>{x(o,clearInterval),o=void 0}))},e.createSessionPersister=(e,t)=>Te(e,t,sessionStorage),e.createStore=()=>{let e,t,s=0,o=0;const r=W(),i=W(),c=W(),h=W(),g=W(),p=W(),w=W(),v=W(),I=_(Y),y=_(Y),T=_(),C=_(),m=_(),k=_(),E=_(),F=_(),P=_(Y),[j,B,$,ee]=oe((()=>Ue)),te=(t,s)=>(!e||J(p,s)||Ae(s))&&ke(t,((e,t)=>se(s,t,e)),(()=>Ae(s))),se=(e,t,s,n)=>ke(n?s:re(s,e,t),((n,o)=>x(ne(e,t,o,n),(e=>(s[o]=e,!0)),(()=>!1))),(()=>Ae(e,t))),ne=(t,s,n,o)=>e?x(H(H(p,t),n),(e=>me(o)!=e.type?Ae(t,s,n,o,e.default):o),(()=>Ae(t,s,n,o))):M(me(o))?Ae(t,s,n,o):o,re=(e,t,s)=>(x(H(w,t),(([n,o])=>{N(n,((t,s)=>{le(e,s)||(e[s]=t)})),N(o,(n=>{le(e,n)||Ae(t,s,n)}))})),e),ae=e=>Ce(p,e,((e,t,s)=>{const n=W(),o=Y();Ce(Q(p,t,W),s,((e,t,s)=>{K(e,t,s),x(s.default,(e=>K(n,t,e)),(()=>Z(o,t)))})),K(w,t,[n,o])}),((e,t)=>{K(p,t),K(w,t)})),ie=e=>Ce(v,e,((e,t,s)=>he(t,s)),((e,t)=>ye(t))),he=(e,t)=>Ce(Q(v,e,(()=>(Re(e,1),W()))),t,((t,s,n)=>ge(e,t,s,n)),((t,s)=>Se(e,t,s))),ge=(e,t,s,n,o)=>Ce(Q(t,s,(()=>(be(e,s,1),W()))),n,((t,n,o)=>pe(e,s,t,n,o)),((n,r)=>Te(e,t,s,n,r,o))),pe=(e,t,s,n,o)=>{J(s,n)||Me(e,t,n,1);const r=H(s,n);o!==r&&(xe(e,t,n,r,o),K(s,n,o))},we=(e,t,s,n,o)=>x(H(t,s),(t=>pe(e,s,t,n,o)),(()=>ge(e,t,s,re({[n]:o},e,s)))),ve=e=>{const t=n+s++;return J(e,t)?ve(e):t},Ie=e=>H(v,e)??he(e,{}),ye=e=>he(e,{}),Se=(e,t,s)=>ge(e,t,s,{},!0),Te=(e,t,s,n,o,r)=>{const a=H(H(w,e)?.[0],o);if(!M(a)&&!r)return pe(e,s,n,o,a);const i=t=>{xe(e,s,t,H(n,t)),Me(e,s,t,-1),K(n,t)};M(a)?i(o):G(n,i),O(n)&&(be(e,s,-1),O(K(t,s))&&(Re(e,-1),K(v,e)))},Re=(e,t)=>Ee(r,e,t),be=(e,t,s)=>Ee(Q(i,e,W),t,s),Me=(e,t,s,n)=>Ee(Q(Q(c,e,W),t,W),s,n),xe=(e,t,s,n,o)=>Q(Q(Q(h,e,W),t,W),s,(()=>[n,0]))[1]=o,Ae=(e,t,s,n,o)=>(S(Q(Q(Q(g,e,W),t,W),s,(()=>[])),n),o),De=(e,t,s)=>x(H(H(H(h,e),t),s),(([e,t])=>[!0,e,t]),(()=>[!1,...u(Be(e,t,s))])),Fe=e=>O(g)||O(F[e])?0:N(e?V(g,X):g,((t,s)=>N(t,((t,n)=>N(t,((t,o)=>B(F[e],[s,n,o],t))))))),Pe=e=>{const t=O(k[e])&&O(C[e])&&O(y[e]),s=O(E[e])&&O(m[e])&&O(T[e])&&O(I[e]);if(!t||!s){const n=e?[V(r),X(i),V(c,X),V(h,X)]:[r,i,c,h];if(t||(N(n[2],((t,s)=>N(t,((t,n)=>{O(t)||B(k[e],[s,n])})))),N(n[1],((t,s)=>{O(t)||B(C[e],[s])})),O(n[0])||B(y[e])),!s){let t;N(n[3],((s,n)=>{let o;N(s,((s,r)=>{let a;N(s,(([s,i],d)=>{i!==s&&(B(E[e],[n,r,d],i,s,De),t=o=a=1)})),a&&B(m[e],[n,r],De)})),o&&B(T[e],[n],De)})),t&&B(I[e],[],De)}}},Je=(e,...t)=>(Ge((()=>{return e(...(s=t,n=Le,s.map(n)));var s,n})),Ue),Oe=()=>U(v,(e=>U(e,U))),je=()=>q(v),ze=e=>q(H(v,Le(e))),Ne=(e,t)=>q(H(H(v,Le(e)),Le(t))),Be=(e,t,s)=>H(H(H(v,Le(e)),Le(t)),Le(s)),We=e=>Je((()=>(e=>ke(e,te,Ae))(e)?ie(e):0)),_e=(e,t,s,n)=>Je(((e,t,s)=>x(ne(e,t,s,D(n)?n(Be(e,t,s)):n),(n=>we(e,Ie(e),t,s,n)))),e,t,s),qe=()=>Je((()=>ie({}))),He=(e,t,s,n)=>Je(((e,t,s)=>x(H(v,e),(o=>x(H(o,t),(r=>J(r,s)?Te(e,o,t,r,s,n):0))))),e,t,s),Ge=(e,t)=>{if(-1==o)return;Ke();const s=e?.();return Qe(t),s},Ke=()=>(o++,Ue),Qe=e=>(o>0&&(o--,0==o&&(t=!O(h),o=1,Fe(1),t&&Pe(1),o=-1,e?.(U(h,(e=>U(e,(e=>U(e,(e=>[...e]),(([e,t])=>e===t))),fe)),fe),U(g,(e=>U(e,U))))&&(o=1,N(h,((e,t)=>N(e,((e,s)=>N(e,(([e],n)=>M(e)?He(t,s,n,!0):_e(t,s,n,e))))))),o=-1,t=!1),B(P[0],[],t),Fe(0),t&&Pe(0),B(P[1],[],t),o=0,L([h,g,r,i,c],z))),Ue),Ue={getTables:Oe,getTableIds:je,getTable:e=>U(H(v,Le(e)),U),getRowIds:ze,getRow:(e,t)=>U(H(H(v,Le(e)),Le(t))),getCellIds:Ne,getCell:Be,hasTables:()=>!O(v),hasTable:e=>J(v,Le(e)),hasRow:(e,t)=>J(H(v,Le(e)),Le(t)),hasCell:(e,t,s)=>J(H(H(v,Le(e)),Le(t)),Le(s)),getJson:()=>R(v),getSchemaJson:()=>R(p),setTables:We,setTable:(e,t)=>Je((e=>te(t,e)?he(e,t):0),e),setRow:(e,t,s)=>Je(((e,t)=>se(Le(e),Le(t),s)?ge(Le(e),Ie(Le(e)),Le(t),s):0),e,t),addRow:(e,t)=>Ge((()=>{let s;return se(e,s,t)&&(e=Le(e),ge(e,Ie(e),s=ve(H(v,e)),t)),s})),setPartialRow:(e,t,s)=>Je(((e,t)=>{if(se(e,t,s,1)){const n=Ie(e);ue(s,((s,o)=>we(e,n,t,o,s)))}}),e,t),setCell:_e,setJson:e=>{try{"{}"===e?qe():We(b(e))}catch{}return Ue},setSchema:t=>Je((()=>{if((e=(e=>ke(e,(e=>ke(e,(e=>{if(!ke(e,((e,t)=>f([d,l],t))))return!1;const t=e.type;return!(!A(t)&&t!=a||(me(e.default)!=t&&ce(e,l),0))})))))(t))&&(ae(t),!O(v))){const e=Oe();qe(),We(e)}})),delTables:qe,delTable:e=>Je((e=>J(v,e)?ye(e):0),e),delRow:(e,t)=>Je(((e,t)=>x(H(v,e),(s=>J(s,t)?Se(e,s,t):0))),e,t),delCell:He,delSchema:()=>Je((()=>{ae({}),e=!1})),transaction:Ge,startTransaction:Ke,finishTransaction:Qe,forEachTable:e=>N(v,((t,s)=>e(s,(e=>N(t,((t,s)=>e(s,(e=>G(t,e))))))))),forEachRow:(e,t)=>N(H(v,Le(e)),((e,s)=>t(s,(t=>G(e,t))))),forEachCell:(e,t,s)=>G(H(H(v,Le(e)),Le(t)),s),addTablesListener:(e,t)=>j(e,I[t?1:0]),addTableIdsListener:(e,t)=>j(e,y[t?1:0]),addTableListener:(e,t,s)=>j(t,T[s?1:0],[e]),addRowIdsListener:(e,t,s)=>j(t,C[s?1:0],[e]),addRowListener:(e,t,s,n)=>j(s,m[n?1:0],[e,t]),addCellIdsListener:(e,t,s,n)=>j(s,k[n?1:0],[e,t]),addCellListener:(e,t,s,n,o)=>j(n,E[o?1:0],[e,t,s]),addInvalidCellListener:(e,t,s,n,o)=>j(n,F[o?1:0],[e,t,s]),addWillFinishTransactionListener:e=>j(e,P[0]),addDidFinishTransactionListener:e=>j(e,P[1]),callListener:e=>(ee(e,[je,ze,Ne],(e=>M(e[2])?[]:u(Be(...e)))),Ue),delListener:e=>($(e),Ue),getListenerStats:()=>({})};return de(Ue)},e.defaultSorter=ge,e.id=Le,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("fs")):"function"==typeof define&&define.amd?define(["exports","fs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBase={},e.fs);
